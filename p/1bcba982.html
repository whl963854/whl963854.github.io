<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>套接字编程 | Hexo</title>
  <meta name="keywords" content="">
  <meta name="description" content="套接字编程 | Hexo">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="页面未找到！">
<meta property="og:type" content="website">
<meta property="og:title" content="404">
<meta property="og:url" content="http://example.com/404/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="页面未找到！">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2016-09-27T03:31:01.000Z">
<meta property="article:modified_time" content="2022-09-13T11:24:43.803Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/atom-light.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<meta name="generator" content="Hexo 6.0.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/"
   class="avatar_target">
    <img class="avatar"
         src="/img/avatar.jpg"/>
</a>
<div class="author">
    <span>John Doe</span>
</div>

<div class="icon">
    
        
            <a title="rss"
               href="/atom.xml"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-rss"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="github"
               href="https://github.com/whl963854"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-github"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            <a title="email"
               href="mailto:3366576307@qq.com"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-email"></use>
                    </svg>
                
            </a>
        
    
        
            <a title="qq"
               href="http://wpa.qq.com/msgrd?v=3&uin=3366576307&site=qq&menu=yes"
               target="_blank">
                
                    <svg class="iconfont-svg" aria-hidden="true">
                        <use xlink:href="#icon-qq"></use>
                    </svg>
                
            </a>
        
    
        
    
        
    
</div>



    <a class="more-menus">更多菜单</a>


<ul>
    <li>
        <div class="all active" data-rel="All">All
            
                <small>(155)</small>
            
        </div>
    </li>
    
        
            
                <li>
                    <div data-rel="环境搭建">
                        
                        环境搭建
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="计算机通信与网络">
                        
                        计算机通信与网络
                        <small>(3)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="框架">
                        
                        框架
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="软工">
                        
                        软工
                        <small>(1)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="设计模式">
                        
                        设计模式
                        <small>(25)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="算法">
                        
                        算法
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="算法与数据结构">
                        
                        算法与数据结构
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="题解">
                        
                        题解
                        <small>(26)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="cpp">
                        
                        cpp
                        <small>(60)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Database">
                        
                        Database
                        <small>(21)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Git">
                        
                        Git
                        <small>(2)</small>
                        
                    </div>
                    
                </li>
            
        
    
        
            
                <li>
                    <div data-rel="Linux">
                        
                        Linux
                        <small>(4)</small>
                        
                    </div>
                    
                </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
        
            
            
            
                <a class="dynamic-menu "
                   target="_blank"
                        
                   href="https://github.com/whl963854">github</a>
        
    </div>
    <div>
        
            <a class="about  hasFriend  "
               target="_blank"
                    
               href="/about">About</a>
        
        <a style="width: 50%"
                
                                           class="friends">Friends</a>
        
    </div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="155">
<input type="hidden" id="yelog_site_word_count" value="181.1k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        Links
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">All</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" autocomplete="off"/>
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>编码规范</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>创建型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>动态规划</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>华为可信课程</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>剑指offer</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>结构型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>蓝桥</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>码题集</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>软工</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>实习</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>数据结构</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>现代cpp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>行为型模式</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>字节</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>c++11</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cpp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>csp</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>leetcode</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Linux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>math</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>MySQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NoSQL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Redis</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>STL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>wps</a>
            </li>
        
    </div>

</div>

    
    <div id="local-search-result">

    </div>
    
    <nav id="title-list-nav">
        
        
        <a  class="All "
           href="/p/1.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="WebAssembly与Go实践">WebAssembly与Go实践</span>
            <span class="post-date" title="2023-06-03 21:27:27">2023/06/03</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/122fc4b2.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="UML类图">UML类图</span>
            <span class="post-date" title="2023-06-03 13:19:25">2023/06/03</span>
        </a>
        
        
        <a  class="All 环境搭建 "
           href="/p/789273fd.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="libevent可执行文件生成">libevent可执行文件生成</span>
            <span class="post-date" title="2023-05-23 22:13:36">2023/05/23</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/330a6169.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="lambda表达式">lambda表达式</span>
            <span class="post-date" title="2023-05-22 21:10:56">2023/05/22</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/7296bf5f.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="特种成员函数的生成机制">特种成员函数的生成机制</span>
            <span class="post-date" title="2023-05-05 21:14:31">2023/05/05</span>
        </a>
        
        
        <a  class="All 算法与数据结构 "
           href="/p/15bc60d.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="最短路径">最短路径</span>
            <span class="post-date" title="2023-05-02 18:33:03">2023/05/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/39842.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="std::move和std::forword">std::move和std::forword</span>
            <span class="post-date" title="2023-04-24 20:28:22">2023/04/24</span>
        </a>
        
        
        <a  class="All 框架 "
           href="/p/a9a8d1fe.html"
           data-tag="实习"
           data-author="" >
            <span class="post-title" title="wasm">wasm</span>
            <span class="post-date" title="2023-04-24 20:20:11">2023/04/24</span>
        </a>
        
        
        <a  class="All 框架 "
           href="/p/2ecd4e0f.html"
           data-tag="实习"
           data-author="" >
            <span class="post-title" title="基于xfx torm的学习开发和容器化打包部署">基于xfx torm的学习开发和容器化打包部署</span>
            <span class="post-date" title="2023-04-24 20:20:10">2023/04/24</span>
        </a>
        
        
        <a  class="All 计算机通信与网络 "
           href="/p/d0681926.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="通信的三种方式">通信的三种方式</span>
            <span class="post-date" title="2023-04-23 21:13:21">2023/04/23</span>
        </a>
        
        
        <a  class="All 计算机通信与网络 "
           href="/p/2f9ed4ad.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="网络边缘">网络边缘</span>
            <span class="post-date" title="2023-04-23 21:13:21">2023/04/23</span>
        </a>
        
        
        <a  class="All 计算机通信与网络 "
           href="/p/1bcba982.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="套接字编程">套接字编程</span>
            <span class="post-date" title="2023-04-23 21:13:21">2023/04/23</span>
        </a>
        
        
        <a  class="All 算法与数据结构 "
           href="/p/c517589e.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="并查集">并查集</span>
            <span class="post-date" title="2023-04-23 21:12:38">2023/04/23</span>
        </a>
        
        
        <a  class="All 算法与数据结构 "
           href="/p/ea4681d0.html"
           data-tag="数据结构"
           data-author="" >
            <span class="post-title" title="二叉树的遍历">二叉树的遍历</span>
            <span class="post-date" title="2023-04-23 21:12:38">2023/04/23</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/8398734e.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="枚举类">枚举类</span>
            <span class="post-date" title="2023-04-22 15:32:16">2023/04/22</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/814162d0.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="初始化方式">初始化方式</span>
            <span class="post-date" title="2023-04-22 14:45:44">2023/04/22</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/39914.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="B+树和B树的区别">B+树和B树的区别</span>
            <span class="post-date" title="2023-04-15 15:16:30">2023/04/15</span>
        </a>
        
        
        <a  class="All Linux "
           href="/p/56191.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux用户和权限">Linux用户和权限</span>
            <span class="post-date" title="2023-04-09 16:09:46">2023/04/09</span>
        </a>
        
        
        <a  class="All Linux "
           href="/p/13375.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux基本命令">Linux基本命令</span>
            <span class="post-date" title="2023-04-09 15:43:31">2023/04/09</span>
        </a>
        
        
        <a  class="All Linux "
           href="/p/26649.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux文件管理">Linux文件管理</span>
            <span class="post-date" title="2023-04-09 15:04:48">2023/04/09</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/226.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="线程池">线程池</span>
            <span class="post-date" title="2023-04-06 21:15:15">2023/04/06</span>
        </a>
        
        
        <a  class="All "
           href="/p/0.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2023-04-05 16:47:27">2023/04/05</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/28384.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="死锁">死锁</span>
            <span class="post-date" title="2023-04-04 22:56:12">2023/04/04</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/41558.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="日志类型">日志类型</span>
            <span class="post-date" title="2023-04-04 20:30:49">2023/04/04</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/33810.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="事务三种提交问题">事务三种提交问题</span>
            <span class="post-date" title="2023-04-04 19:48:39">2023/04/04</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/14751.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="事务隔离级别">事务隔离级别</span>
            <span class="post-date" title="2023-04-04 19:39:30">2023/04/04</span>
        </a>
        
        
        <a  class="All 算法 "
           href="/p/61809.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="并查集">并查集</span>
            <span class="post-date" title="2023-04-04 09:23:30">2023/04/04</span>
        </a>
        
        
        <a  class="All 算法 "
           href="/p/56030.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="带权并查集">带权并查集</span>
            <span class="post-date" title="2023-04-04 09:19:22">2023/04/04</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/14976.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="虚函数表">虚函数表</span>
            <span class="post-date" title="2023-04-02 22:49:10">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/43341.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="cpp代码到exe">cpp代码到exe</span>
            <span class="post-date" title="2023-04-02 20:20:53">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/63561.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="类型转换">类型转换</span>
            <span class="post-date" title="2023-04-02 19:56:58">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/27999.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="移动语义">移动语义</span>
            <span class="post-date" title="2023-04-02 19:27:59">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/64202.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="move">move</span>
            <span class="post-date" title="2023-04-02 16:52:48">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/3763.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="左值右值">左值右值</span>
            <span class="post-date" title="2023-04-02 15:30:23">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/50074.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="完美转发">完美转发</span>
            <span class="post-date" title="2023-04-02 15:24:52">2023/04/02</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/52505.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="并发">并发</span>
            <span class="post-date" title="2023-03-15 23:04:38">2023/03/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/10970.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="内存">内存</span>
            <span class="post-date" title="2023-03-11 23:53:41">2023/03/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/47719.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="智能指针">智能指针</span>
            <span class="post-date" title="2023-03-11 23:49:23">2023/03/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/6239.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="与时间有关的程序">与时间有关的程序</span>
            <span class="post-date" title="2023-03-11 22:36:47">2023/03/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/64657.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="左值引用和右值引用">左值引用和右值引用</span>
            <span class="post-date" title="2023-03-11 10:22:51">2023/03/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/57725.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="lambda的使用">lambda的使用</span>
            <span class="post-date" title="2023-03-11 09:58:25">2023/03/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/28630.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="编译时常量的使用">编译时常量的使用</span>
            <span class="post-date" title="2023-03-10 23:30:43">2023/03/10</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/5639.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="类型推断">类型推断</span>
            <span class="post-date" title="2023-03-10 22:27:43">2023/03/10</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/54280.html"
           data-tag="现代cpp"
           data-author="" >
            <span class="post-title" title="初始化变量">初始化变量</span>
            <span class="post-date" title="2023-03-09 13:45:00">2023/03/09</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/19966.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="委派构造函数">委派构造函数</span>
            <span class="post-date" title="2023-02-19 23:09:08">2023/02/19</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/35775.html"
           data-tag="蓝桥"
           data-author="" >
            <span class="post-title" title="统计子矩阵">统计子矩阵</span>
            <span class="post-date" title="2023-02-15 16:07:28">2023/02/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/51768.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="Hashtable">Hashtable</span>
            <span class="post-date" title="2023-02-15 15:08:09">2023/02/15</span>
        </a>
        
        
        <a  class="All Git "
           href="/p/1.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git学习">git学习</span>
            <span class="post-date" title="2023-01-11 15:05:36">2023/01/11</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/12758.html"
           data-tag="码题集"
           data-author="" >
            <span class="post-title" title="棘手怀念摧毁">棘手怀念摧毁</span>
            <span class="post-date" title="2022-12-25 19:40:47">2022/12/25</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/5455.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="SpringDataRedis">SpringDataRedis</span>
            <span class="post-date" title="2022-12-16 19:23:43">2022/12/16</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/26793.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Jedis">Jedis</span>
            <span class="post-date" title="2022-12-16 19:14:50">2022/12/16</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/31805.html"
           data-tag="Redis"
           data-author="" >
            <span class="post-title" title="Redis常见命令">Redis常见命令</span>
            <span class="post-date" title="2022-12-16 17:09:34">2022/12/16</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/28345.html"
           data-tag="NoSQL"
           data-author="" >
            <span class="post-title" title="NoSQL">NoSQL</span>
            <span class="post-date" title="2022-12-16 17:03:38">2022/12/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/24227.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="多线程">多线程</span>
            <span class="post-date" title="2022-11-27 17:02:58">2022/11/27</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/50156.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="解析器模式">解析器模式</span>
            <span class="post-date" title="2022-11-26 16:21:36">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/5265.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="访问器模式">访问器模式</span>
            <span class="post-date" title="2022-11-26 16:06:00">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/52113.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="职责链模式">职责链模式</span>
            <span class="post-date" title="2022-11-26 15:56:40">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/28241.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="迭代器模式">迭代器模式</span>
            <span class="post-date" title="2022-11-26 15:42:22">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/55487.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="中介者模式">中介者模式</span>
            <span class="post-date" title="2022-11-26 15:29:22">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/44993.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="组合模式">组合模式</span>
            <span class="post-date" title="2022-11-26 15:22:50">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/58978.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="门面模式">门面模式</span>
            <span class="post-date" title="2022-11-26 15:06:14">2022/11/26</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/65163.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="享元模式">享元模式</span>
            <span class="post-date" title="2022-11-26 14:51:16">2022/11/26</span>
        </a>
        
        
        <a  class="All 软工 "
           href="/p/55324.html"
           data-tag="软工"
           data-author="" >
            <span class="post-title" title="某些小项目">某些小项目</span>
            <span class="post-date" title="2022-11-23 16:13:10">2022/11/23</span>
        </a>
        
        
        <a  class="All Linux "
           href="/p/4551.html"
           data-tag="Linux"
           data-author="" >
            <span class="post-title" title="Linux简介">Linux简介</span>
            <span class="post-date" title="2022-11-23 15:59:13">2022/11/23</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/56214.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="备忘录模式">备忘录模式</span>
            <span class="post-date" title="2022-11-21 20:58:19">2022/11/21</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/39447.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="状态模式">状态模式</span>
            <span class="post-date" title="2022-11-21 20:32:29">2022/11/21</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/52292.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="香槟塔">香槟塔</span>
            <span class="post-date" title="2022-11-20 21:12:37">2022/11/20</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/39967.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="匹配子序列的单词数">匹配子序列的单词数</span>
            <span class="post-date" title="2022-11-19 16:42:23">2022/11/19</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/43256.html"
           data-tag="csp"
           data-author="" >
            <span class="post-title" title="防疫大数据">防疫大数据</span>
            <span class="post-date" title="2022-10-20 19:33:24">2022/10/20</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/57245.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="RvalueReference">RvalueReference</span>
            <span class="post-date" title="2022-10-18 14:59:21">2022/10/18</span>
        </a>
        
        
        <a  class="All "
           href="/p/2.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title=""></span>
            <span class="post-date" title="2022-10-16 15:25:47">2022/10/16</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/52608.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="最长回文子串">最长回文子串</span>
            <span class="post-date" title="2022-10-16 13:32:46">2022/10/16</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/22977.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="命令模式">命令模式</span>
            <span class="post-date" title="2022-10-15 15:32:21">2022/10/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/64590.html"
           data-tag="wps"
           data-author="" >
            <span class="post-title" title="c++编码规范">c++编码规范</span>
            <span class="post-date" title="2022-10-15 15:26:48">2022/10/15</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/53127.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="最长字符串链">最长字符串链</span>
            <span class="post-date" title="2022-10-13 13:59:07">2022/10/13</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/4097.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="Otherthings">Otherthings</span>
            <span class="post-date" title="2022-10-11 19:24:37">2022/10/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/6511.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="Template Template Parameter">Template Template Parameter</span>
            <span class="post-date" title="2022-10-11 19:04:35">2022/10/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/45839.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="Alias Template">Alias Template</span>
            <span class="post-date" title="2022-10-11 18:45:06">2022/10/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/4260.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="Initialization">Initialization</span>
            <span class="post-date" title="2022-10-10 16:54:01">2022/10/10</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/64016.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="变参模板">变参模板</span>
            <span class="post-date" title="2022-10-10 16:31:16">2022/10/10</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/9423.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="STL">STL</span>
            <span class="post-date" title="2022-10-07 18:29:52">2022/10/07</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/39842.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="unique_ptr">unique_ptr</span>
            <span class="post-date" title="2022-10-02 19:53:58">2022/10/02</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/39856.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="构建器模式">构建器模式</span>
            <span class="post-date" title="2022-10-02 19:01:32">2022/10/02</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/62812.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="InnoDB引擎">InnoDB引擎</span>
            <span class="post-date" title="2022-10-02 15:15:37">2022/10/02</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/21631.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="锁">锁</span>
            <span class="post-date" title="2022-09-29 23:16:11">2022/09/29</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/3892.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="装饰者模式">装饰者模式</span>
            <span class="post-date" title="2022-09-29 16:22:07">2022/09/29</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/27560.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="桥模式">桥模式</span>
            <span class="post-date" title="2022-09-29 15:51:18">2022/09/29</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/61876.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="超过一半的数字">超过一半的数字</span>
            <span class="post-date" title="2022-09-28 20:03:36">2022/09/28</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/34639.html"
           data-tag="剑指offer"
           data-author="" >
            <span class="post-title" title="数组中数字出现的个数">数组中数字出现的个数</span>
            <span class="post-date" title="2022-09-27 21:20:30">2022/09/27</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/40758.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="触发器">触发器</span>
            <span class="post-date" title="2022-09-27 16:04:13">2022/09/27</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/64451.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="存储过程">存储过程</span>
            <span class="post-date" title="2022-09-23 12:44:39">2022/09/23</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/3825.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="视图">视图</span>
            <span class="post-date" title="2022-09-23 11:04:20">2022/09/23</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/14565.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="模板模式">模板模式</span>
            <span class="post-date" title="2022-09-22 19:52:54">2022/09/22</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/39554.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="适配器模式">适配器模式</span>
            <span class="post-date" title="2022-09-22 19:31:55">2022/09/22</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/29711.html"
           data-tag="创建型模式"
           data-author="" >
            <span class="post-title" title="建造者模式">建造者模式</span>
            <span class="post-date" title="2022-09-22 19:20:40">2022/09/22</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/48003.html"
           data-tag="结构型模式"
           data-author="" >
            <span class="post-title" title="代理模式">代理模式</span>
            <span class="post-date" title="2022-09-22 18:57:19">2022/09/22</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/22548.html"
           data-tag="创建型模式"
           data-author="" >
            <span class="post-title" title="原型模式">原型模式</span>
            <span class="post-date" title="2022-09-22 18:35:08">2022/09/22</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/7738.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="观察者模式">观察者模式</span>
            <span class="post-date" title="2022-09-22 16:22:50">2022/09/22</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/1692.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="优化">优化</span>
            <span class="post-date" title="2022-09-21 19:27:54">2022/09/21</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/11557.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="索引">索引</span>
            <span class="post-date" title="2022-09-20 19:41:27">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/27905.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="存储引擎">存储引擎</span>
            <span class="post-date" title="2022-09-20 19:14:39">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/62546.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="事务">事务</span>
            <span class="post-date" title="2022-09-20 18:37:59">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/19503.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="多表查询">多表查询</span>
            <span class="post-date" title="2022-09-20 15:09:37">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/35621.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="约束">约束</span>
            <span class="post-date" title="2022-09-20 14:27:02">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/21513.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="函数">函数</span>
            <span class="post-date" title="2022-09-20 13:07:32">2022/09/20</span>
        </a>
        
        
        <a  class="All Database "
           href="/p/29900.html"
           data-tag="MySQL"
           data-author="" >
            <span class="post-title" title="SQL">SQL</span>
            <span class="post-date" title="2022-09-20 10:02:57">2022/09/20</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/35802.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="常用集合算法">常用集合算法</span>
            <span class="post-date" title="2022-09-16 20:39:48">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/41195.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="常用算术生成算法">常用算术生成算法</span>
            <span class="post-date" title="2022-09-16 20:38:46">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/20982.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="常用拷贝和替换算法">常用拷贝和替换算法</span>
            <span class="post-date" title="2022-09-16 20:25:30">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/29759.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="常用排序算法">常用排序算法</span>
            <span class="post-date" title="2022-09-16 19:53:06">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/31381.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="STL常用算法">STL常用算法</span>
            <span class="post-date" title="2022-09-16 13:06:00">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/45788.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="内建函数对象">内建函数对象</span>
            <span class="post-date" title="2022-09-16 12:35:16">2022/09/16</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/37043.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="map/multimap">map/multimap</span>
            <span class="post-date" title="2022-09-15 21:12:00">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/22700.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="set/multiset">set/multiset</span>
            <span class="post-date" title="2022-09-15 21:07:26">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/39907.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="List">List</span>
            <span class="post-date" title="2022-09-15 20:34:58">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/41872.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="queue">queue</span>
            <span class="post-date" title="2022-09-15 20:33:56">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/64038.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="stack">stack</span>
            <span class="post-date" title="2022-09-15 20:25:14">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/42201.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="deque">deque</span>
            <span class="post-date" title="2022-09-15 20:06:02">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/54708.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="vector">vector</span>
            <span class="post-date" title="2022-09-15 19:33:36">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/58909.html"
           data-tag="STL"
           data-author="" >
            <span class="post-title" title="string">string</span>
            <span class="post-date" title="2022-09-15 16:29:29">2022/09/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/5958.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="谓词">谓词</span>
            <span class="post-date" title="2022-09-15 16:19:03">2022/09/15</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/46132.html"
           data-tag="创建型模式"
           data-author="" >
            <span class="post-title" title="单例模式">单例模式</span>
            <span class="post-date" title="2022-09-15 16:04:46">2022/09/15</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/59316.html"
           data-tag="创建型模式"
           data-author="" >
            <span class="post-title" title="factory模式">factory模式</span>
            <span class="post-date" title="2022-09-15 16:04:46">2022/09/15</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/38710.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="括号生成">括号生成</span>
            <span class="post-date" title="2022-09-13 16:21:25">2022/09/13</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/59129.html"
           data-tag="csp"
           data-author="" >
            <span class="post-title" title="寻宝大作战">寻宝大作战</span>
            <span class="post-date" title="2022-09-11 16:31:29">2022/09/11</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/23999.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="金山训练营第一周">金山训练营第一周</span>
            <span class="post-date" title="2022-09-09 19:46:09">2022/09/09</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/59828.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="把数组排成最小的数">把数组排成最小的数</span>
            <span class="post-date" title="2022-09-08 14:13:19">2022/09/08</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/20114.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="同构字符串">同构字符串</span>
            <span class="post-date" title="2022-09-08 12:31:34">2022/09/08</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/64084.html"
           data-tag="字节"
           data-author="" >
            <span class="post-title" title="数组游戏">数组游戏</span>
            <span class="post-date" title="2022-09-07 16:57:46">2022/09/07</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/63859.html"
           data-tag="math"
           data-author="" >
            <span class="post-title" title="全排列">全排列</span>
            <span class="post-date" title="2022-09-07 13:01:27">2022/09/07</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/1868.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="日期差值">日期差值</span>
            <span class="post-date" title="2022-09-06 16:14:24">2022/09/06</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/61401.html"
           data-tag="动态规划"
           data-author="" >
            <span class="post-title" title="零钱兑换">零钱兑换</span>
            <span class="post-date" title="2022-09-04 12:13:58">2022/09/04</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/58639.html"
           data-tag="行为型模式"
           data-author="" >
            <span class="post-title" title="策略模式">策略模式</span>
            <span class="post-date" title="2022-09-01 10:25:44">2022/09/01</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/47718.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="智能指针">智能指针</span>
            <span class="post-date" title="2022-08-30 20:56:50">2022/08/30</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/1199.html"
           data-tag="c++11"
           data-author="" >
            <span class="post-title" title="nullptr">nullptr</span>
            <span class="post-date" title="2022-08-30 20:41:05">2022/08/30</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/49651.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="前k个高频词">前k个高频词</span>
            <span class="post-date" title="2022-08-30 20:09:01">2022/08/30</span>
        </a>
        
        
        <a  class="All 设计模式 "
           href="/p/50254.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="设计模式简介">设计模式简介</span>
            <span class="post-date" title="2022-08-30 19:44:16">2022/08/30</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/14283.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="无重复字符的最长子串">无重复字符的最长子串</span>
            <span class="post-date" title="2022-08-12 10:09:13">2022/08/12</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/967.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="反转链表">反转链表</span>
            <span class="post-date" title="2022-08-10 11:41:17">2022/08/10</span>
        </a>
        
        
        <a  class="All 算法与数据结构 "
           href="/p/37489.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="排序">排序</span>
            <span class="post-date" title="2022-08-10 10:04:24">2022/08/10</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/43574.html"
           data-tag="cpp"
           data-author="" >
            <span class="post-title" title="链接编译联编">链接编译联编</span>
            <span class="post-date" title="2022-08-08 11:21:41">2022/08/08</span>
        </a>
        
        
        <a  class="All Git "
           href="/p/5226.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="git常用方法">git常用方法</span>
            <span class="post-date" title="2022-08-05 09:44:12">2022/08/05</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/41521.html"
           data-tag="华为可信课程"
           data-author="" >
            <span class="post-title" title="代码风格规定">代码风格规定</span>
            <span class="post-date" title="2022-07-30 10:52:08">2022/07/30</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/46257.html"
           data-tag="华为可信课程"
           data-author="" >
            <span class="post-title" title="lambda、资源管理与杂项">lambda、资源管理与杂项</span>
            <span class="post-date" title="2022-07-29 19:01:40">2022/07/29</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/29637.html"
           data-tag="华为可信课程,编码规范"
           data-author="" >
            <span class="post-title" title="类与函数">类与函数</span>
            <span class="post-date" title="2022-07-29 18:01:02">2022/07/29</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/39885.html"
           data-tag="华为可信课程"
           data-author="" >
            <span class="post-title" title="表达式与变量">表达式与变量</span>
            <span class="post-date" title="2022-07-15 09:50:49">2022/07/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/22884.html"
           data-tag="华为可信课程"
           data-author="" >
            <span class="post-title" title="安全编码与未定义行为">安全编码与未定义行为</span>
            <span class="post-date" title="2022-07-15 09:07:10">2022/07/15</span>
        </a>
        
        
        <a  class="All cpp "
           href="/p/397.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="define、const、typedef、inline">define、const、typedef、inline</span>
            <span class="post-date" title="2022-07-13 10:19:04">2022/07/13</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/40034.html"
           data-tag="csp"
           data-author="" >
            <span class="post-title" title="非零段划分">非零段划分</span>
            <span class="post-date" title="2022-06-06 21:12:44">2022/06/06</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/9616.html"
           data-tag="动态规划"
           data-author="" >
            <span class="post-title" title="买卖股票1">买卖股票1</span>
            <span class="post-date" title="2022-03-26 20:36:28">2022/03/26</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/9615.html"
           data-tag="动态规划"
           data-author="" >
            <span class="post-title" title="买卖股票1">买卖股票1</span>
            <span class="post-date" title="2022-03-26 20:08:12">2022/03/26</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/3457.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="字典序的第k大数字">字典序的第k大数字</span>
            <span class="post-date" title="2022-03-23 20:26:38">2022/03/23</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/47143.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Easy Strings Merging">Easy Strings Merging</span>
            <span class="post-date" title="2022-03-03 19:29:40">2022/03/03</span>
        </a>
        
        
        <a  class="All 题解 "
           href="/p/65488.html"
           data-tag="leetcode"
           data-author="" >
            <span class="post-title" title="779 第k个语法符号">779 第k个语法符号</span>
            <span class="post-date" title="2022-03-03 15:13:51">2022/03/03</span>
        </a>
        
        
        <a  class="All "
           href="/p/16107.html"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Hello World">Hello World</span>
            <span class="post-date" title="2022-03-01 19:26:09">2022/03/01</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>

    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-计算机通信与网络/套接字编程" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">套接字编程</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="计算机通信与网络">计算机通信与网络</a>
            
        </span>
        
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='Updated At: 2023-05-07 00:02:01'>2023-04-23 21:13</time>
        
    </div>
    <div class="article-meta">
        
        <span>Count:9k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views 👀 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="跳转至评论区">
            <a href="#comments">
                Comment:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97-Socket"><span class="toc-text">套接字 - Socket</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ip"><span class="toc-text">ip</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E8%8A%82%E5%BA%8F"><span class="toc-text">字节序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-%E7%9A%84-2-%E7%A7%8D%E7%B1%BB%E5%9E%8B"><span class="toc-text">Socket 的 2 种类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket-I-x2F-O-%E7%9A%84-2-%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">Socket I&#x2F;O 的 2 种模式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A5%97%E6%8E%A5%E5%AD%97%E9%83%A8%E5%88%86%E5%BA%93%E5%87%BD%E6%95%B0%E5%88%97%E8%A1%A8"><span class="toc-text">套接字部分库函数列表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WSAStartup%EF%BC%88%EF%BC%89"><span class="toc-text">WSAStartup（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#socket%EF%BC%88%EF%BC%89"><span class="toc-text">socket（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bind%EF%BC%88%EF%BC%89"><span class="toc-text">bind（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#listen%EF%BC%88%EF%BC%89"><span class="toc-text">listen（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#accept%EF%BC%88%EF%BC%89"><span class="toc-text">accept（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#connect%EF%BC%88%EF%BC%89"><span class="toc-text">connect（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#send%EF%BC%88%EF%BC%89"><span class="toc-text">send（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#recv%EF%BC%88%EF%BC%89"><span class="toc-text">recv（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sendto%EF%BC%88%EF%BC%89"><span class="toc-text">sendto（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#recvfrom%EF%BC%88%EF%BC%89"><span class="toc-text">recvfrom（）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#closesocket%EF%BC%88%EF%BC%89"><span class="toc-text">closesocket（）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Winsock-2-0"><span class="toc-text">Winsock 2.0</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Winsock-2-0-%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">Winsock 2.0 新特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Winsock-2-0-%E6%96%B0%E5%A2%9E%E5%87%BD%E6%95%B0"><span class="toc-text">Winsock 2.0 新增函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">文件描述符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91"><span class="toc-text">多进程并发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%B9%B6%E5%8F%91"><span class="toc-text">多线程并发</span></a></li></ol></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-5 i,
    .toc-level-5 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="套接字-Socket"><a href="#套接字-Socket" class="headerlink" title="套接字 - Socket"></a>套接字 - Socket</h1><p>TCP用主机的IP地址加上主机上的端口号作为TCP连接的端点，这种端点就叫做套接字（socket）或插口。套接字用（IP地址：端口号）表示，区分不同应用程序进程间的网络通信和连接,主要有3个参数：通信的目的IP地址、使用的传输层协议(TCP或UDP)和使用的端口号。</p>
<h2 id="ip"><a href="#ip" class="headerlink" title="ip"></a>ip</h2><p>中国大陆一共有344514560个。占全球可用IPv4地址数量超过8%。<br>如果加上香港的12614144个，也仅仅是8.3%。<br><strong>查看IP</strong></p>
<pre><code># linux
$ ifconfig

# windows
$ ipconfig

# 测试网络是否畅通
# 主机a: 192.168.1.11
# 当前主机: 192.168.1.12
$ ping 192.168.1.11     # 测试是否可用连接局域网
$ ping www.baidu.com    # 测试是否可用连接外网

# 特殊的IP地址: 127.0.0.1  ==&gt; 和本地的IP地址是等价的
# 假设当前电脑没有联网, 就没有IP地址, 又要做网络测试, 可用使用 127.0.0.1 进行本地测试
</code></pre>
<h2 id="字节序"><a href="#字节序" class="headerlink" title="字节序"></a>字节序</h2><p>在计算机的世界中有两种字节序</p>
<ul>
<li>大端字节序：高地址存低位，低地址存高位</li>
<li>小端字节序：低地址存低位，高地址存高位</li>
</ul>
<p>TCP&#x2F;IP协议规定，网络数据流应采用大端字节序，即低地址高字节。如果你的主机不是采用大端字节序就转为大端字节序在发送数据流时就回转换成大端字节序，如果你是大端字节序就不进行转换。我们使用的 PC 机，数据的存储默认使用的是小端。</p>
<pre><code>#include &lt;arpa/inet.h&gt;
// u:unsigned
// 16: 16位, 32:32位
// h: host, 主机字节序
// n: net, 网络字节序
// s: short
// l: int

// 这套api主要用于 网络通信过程中 IP 和 端口 的 转换
// 将一个短整形从主机字节序 -&gt; 网络字节序
uint16_t htons(uint16_t hostshort);    
// 将一个整形从主机字节序 -&gt; 网络字节序
uint32_t htonl(uint32_t hostlong);    

// 将一个短整形从网络字节序 -&gt; 主机字节序
uint16_t ntohs(uint16_t netshort)
// 将一个整形从网络字节序 -&gt; 主机字节序
uint32_t ntohl(uint32_t netlong);
</code></pre>
<p>虽然 IP 地址本质是一个整形数，但是在使用的过程中都是通过一个字符串来描述，下面的函数描述了如何将一个字符串类型的 IP 地址进行大小端转换：</p>
<pre><code>// 主机字节序的IP地址转换为网络字节序
// 主机字节序的IP地址是字符串, 网络字节序IP地址是整形
int inet_pton(int af, const char *src, void *dst); 
</code></pre>
<p>参数:</p>
<pre><code>af: 地址族 (IP 地址的家族包括 ipv4 和 ipv6) 协议
AF_INET: ipv4 格式的 ip 地址
AF_INET6: ipv6 格式的 ip 地址
src: 传入参数，对应要转换的点分十进制的 ip 地址: 192.168.1.100
dst: 传出参数，函数调用完成，转换得到的大端整形 IP 被写入到这块内存中
返回值：成功返回 1，失败返回 0 或者 - 1


#include &lt;arpa/inet.h&gt;
// 将大端的整形数, 转换为小端的点分十进制的IP地址        
const char *inet_ntop(int af, const void *src, char *dst, socklen_t size);
</code></pre>
<p>参数:</p>
<pre><code>af: 地址族协议
AF_INET: ipv4 格式的 ip 地址
AF_INET6: ipv6 格式的 ip 地址
src: 传入参数，这个指针指向的内存中存储了大端的整形 IP 地址
dst: 传出参数，存储转换得到的小端的点分十进制的 IP 地址
size: 修饰 dst 参数的，标记 dst 指向的内存中最多可以存储多少个字节
</code></pre>
<p>返回值:</p>
<pre><code>成功：指针指向第三个参数对应的内存地址，通过返回值也可以直接取出转换得到的 IP 字符串
失败: NULL
</code></pre>
<p>还有一组函数也能进程 IP 地址大小端的转换，但是只能处理 ipv4 的 ip 地址：</p>
<pre><code>// 点分十进制IP -&gt; 大端整形
in_addr_t inet_addr (const char *cp);

// 大端整形 -&gt; 点分十进制IP
char* inet_ntoa(struct in_addr in);
</code></pre>
<h2 id="Socket-的-2-种类型"><a href="#Socket-的-2-种类型" class="headerlink" title="Socket 的 2 种类型"></a>Socket 的 2 种类型</h2><p>Socket 是一个抽象概念，代表了通信双方的端点（Endpoint），通信双方通过Socket 发送或接收数据。<br>在 Winsock 里，用数据类型SOCKET 作为 Windows Sockets 对象的句柄，就好像一个窗口的句柄HWND、一个打开的文件的文件指针一样。下面我们会看到，在 Winsock API 的许多函数里，都会用到 SOCKET 类型的参数。</p>
<p>Socket 有 2 种类型：</p>
<ul>
<li>流类型（Stream Sockets）。<ul>
<li>流式套接字提供了一种可靠的、面向连接的数据传输方法，使用传输控制协议 TCP。</li>
</ul>
</li>
<li>数据报类型（Datagram Sockets）。<ul>
<li>数据报套接字提供了一种不可靠的、非连接的数据包传输方式，使用用户数据报协议 UDP。</li>
</ul>
</li>
</ul>
<h2 id="Socket-I-x2F-O-的-2-种模式"><a href="#Socket-I-x2F-O-的-2-种模式" class="headerlink" title="Socket I&#x2F;O 的 2 种模式"></a>Socket I&#x2F;O 的 2 种模式</h2><p>一个 SOCKET 句柄可以看成代表了一个 I&#x2F;O 设备。在 Windows Sockets 里，有 2 种 I&#x2F;O 模式：</p>
<ul>
<li>阻塞式 I&#x2F;O（blocking I&#x2F;O）<br>在阻塞方式下，收发数据的函数在调用后一直要到传送完毕或者出错才能完成，在阻塞期间，除了等待网络操作的完成不能进行任何操作。阻塞式 I&#x2F;O 是一个 Winsock API 函数的缺省行为。 </li>
<li>非阻塞式 I&#x2F;O（non-blocking I&#x2F;O）<br>对于非阻塞方式，Winsock API 函数被调用后立即返回；当网络操作完成后，由 Winsock 给应用程序发送消息（Socket Notifications）通知操作完成，这时应用程序可以根据发送的消息中的参数对消息做出响应。Winsock 提供了 2 种异步接受数据的方法：一种方法是使用 BSD 类型的函数 select（），另外一种方法是使用 Winsock 提供的专用函数WSAAsyncSelect（）。</li>
</ul>
<h2 id="套接字部分库函数列表"><a href="#套接字部分库函数列表" class="headerlink" title="套接字部分库函数列表"></a>套接字部分库函数列表</h2><h3 id="WSAStartup（）"><a href="#WSAStartup（）" class="headerlink" title="WSAStartup（）"></a>WSAStartup（）</h3><p>函数原型：</p>
<pre><code>int WSAStartup (WORD wVersionRequested,LPWSADATA lpWSAData    );
</code></pre>
<p>参数</p>
<pre><code>wVersionRequested
[in] 表示欲使用的Windows Sockets API 版本；这是个WORD 类型的整数，高字节定义的是次版本号，低字节定义的是主版本号。

lpWSAData
[in] 指向 WSAData 资料的指针。WSAData 是结构数据类型，描述了关于 Windows Sockecs 底层实现的相关信息。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回 0，失败则返回如下错误代码：
WSASYSNOTREADY：    底层网络子系统没有准备好。
WSAVERNOTSUPPORTED：Winsock 版本信息号不支持。WSAEINPROGRESS：    阻塞式 Winsock1.1 存在于进程中。
WSAEPROCLIM：    已经达到 Winsock 使用量的上限。
WSAEFAULT：    lpWSAData 不是一个有效的指针。
</code></pre>
<p>函数功能</p>
<pre><code>这个函数是应用程序应该第一个调用的 Winsock API 函数，以完成一系列初始化的工作。
</code></pre>
<p>相关数据结构</p>
<pre><code>WSADATA 的定义如下：
typedef struct WSAData &#123; 
    WORD wVersion; 
    WORD wHighVersion;
    char   szDescription[WSADESCRIPTION_LEN+1];
    char szSystemStatus[WSASYS_STATUS_LEN+1]; 
    unsigned short iMaxSockets;
    unsigned short   iMaxUdpDg; 
    char FAR *    lpVendorInfo;
&#125; WSADATA, FAR * LPWSADATA;
</code></pre>
<p>其中，各结构成员的含义为:</p>
<pre><code>wVersion应用程序应该使用的 Winsock 版本号。

wHighVersion DLL 所支持的最高版本号。通常应该等于 wVersion。 

szDescription 以 0 结尾的 ASCII 字符串，关于 Winsock 底层实现的描述信息。

szSystemStatus 以 0 结尾的 ASCII 字符串，关于 Winsock 底层状态或者配置信息。

iMaxSockets 一个进程最多可使用的套接字数，仅用于 Winsock1.1，Winsock 2.0 应该忽略该成员。

iMaxUdpDg 最大的 UDP 报文大小，仅用于 Winsock1.1，Winsock 2.0 应该忽略该成员。对于 Winsock 2.0，应该使用getsockopt函数取得 SO_MAX_MSG_SIZE。

lpVendorInfo Winsock 开发厂商信息，，仅用于 Winsock1.1，Winsock 2.0 应该忽略该成员。对于 Winsock 2.0，应该使用 getsockopt函数取得PVD_CONFIG。
</code></pre>
<p>示例代码</p>
<pre><code>#include &lt;winsock.h&gt;
//对于 Winsock 2, include &lt;winsock2.h&gt;
WSADATA wsaData;
int nRc = WSAStartup(0x0101, &amp; wsaData); if(nRc)
&#123;
    //Winsock 初始化错误
    return;
&#125;
if(wsaData.wVersion != 0x0101)
&#123;
    //版本支持不够
    //报告错误给用户，清除 Winsock，返回WSACleanup();
    return;
&#125;
</code></pre>
<h3 id="socket（）"><a href="#socket（）" class="headerlink" title="socket（）"></a>socket（）</h3><p>函数原型</p>
<pre><code>SOCKET socket(int af, int type, int protocol);
</code></pre>
<p>参数</p>
<pre><code>af
[in] 指定地址族（address family），一般填AF_INET（使用 Internet 地址）。AF_INET(ipv6)

type
[in] 指定 SOCKET 的类型：SOCK_STREAM（流类型），SOCK_DGRAM（数据报类型）。

protocol
[in] 指定 af 参数指定的地址族所使用的具体一个协议。建议设为 0，那么它就会根据地址格式和 SOCKET 类型， 自动为你选择一个合适的协议。另外 2 个常用的值为：IPPROTO_UDP 和 IPPROTO_TCP。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回一个新的 SOCKET，失败则返回 INVALID_SOCKET。
这时可以调用 WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>所有的通信在建立之前都要创建一个 SOCKET。
</code></pre>
<p>示例代码</p>
<pre><code>//创建数据报 socket
SCOKET udpSock = socket(AF_INET,
SOCK_DGRAM, IPPROTO_UDP);
//创建流 socket
SCOKET tcpSock = socket(AF_INET,
SOCK_STREAM, IPPROTO_TCP);
</code></pre>
<h3 id="bind（）"><a href="#bind（）" class="headerlink" title="bind（）"></a>bind（）</h3><p>函数原型</p>
<pre><code>int bind(SOCKET sockfd, const struct sockaddr FAR* name, int namelen);
</code></pre>
<p>参数</p>
<pre><code>sockfd
[in] 一个需要绑定的SOCKET，例如用 socket 函数创建的 SOCKET。

name
[in] 指向描述通信对象地址信息的结构体 sockaddr 的指针。在该结构体中可以指定地址族（一般为 AF_INET）、主机的地址和端口。通常把主机地址指定为 INADDR_ANY（一个主机可能有多个网卡）。

namelen
[in] name 指针指向的结构体的长度。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回 0，失败则返回 SOCKET_ERROR。
这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>成功地创建了一个 SOCKET 后，用bind 函数将SOCKET 和主机地址绑定。
</code></pre>
<p>相关数据结构</p>
<pre><code>struct sockaddr &#123;
    u_short    sa_family;
    char    sa_data[14];
&#125;;

sa_family
地址族，比如AF_INET，2 个字节大小。
sa_data
用来存放地址和端口，14 个字节大小。
</code></pre>
<p>sockaddr 结构是一个通用的结构（因为 Winsock 支持的协议族不只是TCP&#x2F;IP）。对 TCP&#x2F;IP 协议，用如下结构来定义地址和端口。</p>
<pre><code>typedef unsigned short  uint16_t;
typedef unsigned int    uint32_t;
typedef uint16_t in_port_t;
typedef uint32_t in_addr_t;
typedef unsigned short int sa_family_t;
#define __SOCKADDR_COMMON_SIZE (sizeof (unsigned short int))


struct sockaddr_in &#123;
    short    sin_family;
    u_short        sin_port; 
    struct    in_addr    sin_addr; 
    char        sin_zero[8];
&#125;;

sin_family
地址族，设为AF_INET。

sin_port
端口号。如果端口号为 0，Winsock 会自动为应用程序分配一个值在 1024-5000 间的一个端口号，所以客户端一般把 sin_port 设为 0。

sin_addr
为 in_addr 结构类型，用来指定 IP 地址。通常把主机地址指定为 INADDR_ANY（一个主机可能有多个网卡）。结构 in_addr 下面介绍。

sin_zero
8 字节的数组，值全为 0。这个 8 个字节用来填充结构sockaddr_in，使其大小等于结构 sockaddr（16 字节）。结构 in_addr 用来指定 IP 地址，其定义为：

struct in_addr &#123;
    union &#123;

        struct &#123; 
            u_char s_b1,s_b2,s_b3,s_b4;
        &#125; S_un_b; 
        
        struct &#123;
            u_short s_w1,s_w2; 
        &#125; S_un_w;
        
        u_long S_addr;

    &#125; S_un;
&#125;;
</code></pre>
<p>对于 IP 地址 10.14.25.90，sockaddr_in 结构中的 sin_addr 可以这样赋值：</p>
<pre><code>sin_addr. S_un .S_un_b. s_b1 = 10; 
sin_addr. S_un .S_un_b. s_b2 = 14; 
sin_addr. S_un .S_un_b. s_b3 = 25; 
sin_addr. S_un .S_un_b. s_b4 = 90;
</code></pre>
<p>或者</p>
<pre><code>sin_addr. S_un . S_un_w. s_w1 = (14&lt;&lt;8)|10; 
sin_addr. S_un . S_un_w. s_w2 = (90&lt;&lt;8)|25;
</code></pre>
<p>或者</p>
<pre><code>sin_addr. S_un . S_addr = (90&lt;&lt;24)|(25&lt;&lt;16)|(14&lt;&lt;8)|10;    
</code></pre>
<p>或者</p>
<pre><code>sin_addr. S_un . S_addr = inet_addr(“10.14.25.90”);
</code></pre>
<p>这里的 inet_addr 函数可以将字符串形式的 IP 地址转换为 unsigned long 形式的值。</p>
<p>示例代码</p>
<pre><code>SOCKET sServSock; sockaddr_in addr;

//创建 socket
sServSock = socket(AF_INET, SOCK_STREAM, 0); addr.sin_family = AF_INET;
//htons 和 htonl 函数把主机字节顺序转换为网络字节顺序，分别用于//短整型和长整型数据
addr.sin_port = htons(5050); addr.sin_addr.S_un.S_addr = htonl(INADDR_ANY);

// LPSOCKADDR 类型转换是必须的
int nRc = bind(sServSock, (LPSOCKADDR)&amp;addr, sizeof(addr) );
</code></pre>
<h3 id="listen（）"><a href="#listen（）" class="headerlink" title="listen（）"></a>listen（）</h3><p>函数原型</p>
<p>int listen (SOCKET s,    int backlog);</p>
<p>参数</p>
<pre><code>s
[in] 一个已经绑定但未连接的 SOCKET。

backlog
[in] 等待连接的队列的长度，可取 SOMAXCONN。如果某个客户程序要求连接的时候，服务器已经与其他客户程序连接，则后来的连接请求会放在等待队列中，等待服务器空闲时再与之连接。当等待队列达到最大长度（backlog 指定的值）时，再来的连接请求都将被拒绝。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回 0，失败则返回 SOCKET_ERROR。这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>对于服务器的程序，当申请到 SOCKET,并将通信对象指定为INADDR_ANY 之后，就应该等待一个客户机的程序来要求连接，listen 函数就是把一个SOCKET 设置为这个状态。
</code></pre>
<h3 id="accept（）"><a href="#accept（）" class="headerlink" title="accept（）"></a>accept（）</h3><p>函数原型</p>
<pre><code>SOCKET accept (SOCKET s, struct sockaddr FAR* addr,
int FAR* addrlen );
</code></pre>
<p>参数</p>
<pre><code>s
[in] 一个已经处于listen 状态的 SOCKET。

addr
[out] 指向 sockaddr 结构体的指针，里面包含了客户端的地址和端 口。

addrlen
[out] int 型指针，指向的内容为 addr 指针指向的结构体的长度。
</code></pre>
<p>返回值</p>
<pre><code>如果函数执行成功，会建立并返回一个新的 SOCKET 来与对方通信，新建的 SOCKET 与原来的 SOCKET（函数的第一个参数 s）有相同的特性，包括端口号。原来的 SOCKET 继续等待其他的连接请求。而新生成的SOCKET 才是与客户端通信的实际 SOCKET。所以一般将参数中的 SOCKET 称作“监听”SOCKET，它只负责接受连接，不负责通话；而对于函数返回的 SOCKET，把它称作“会话”SOCKET，它负责与客户端通话。
如果失败则返回 INVALID_SOCKET。这时可以调用 WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>accept 函数从等待连接的队列中取第一个连接请求，并且创建一个新的 SOCKET 来负责与客户端会话。
</code></pre>
<p>示例代码</p>
<pre><code>SOCKET sServSock;    //服务器监听 
socket sockaddr_in addr;
int nSockErr;
int nNumConns = 0;    //当前请求连接数
SOCKET sConns[5];    //会话 SOCKET 数组
sockaddr ConnAddrs[5];//请求连接的客户端地址
int nAddrLen;

//创建服务器监听 socket
sServSock = socket(AF_INET, SOCK_STREAM, 0);


addr.sin_family = AF_INET; addr.sin_port = htons(5050);
addr.sin_addr.S_un.S_addr = htonl(INADDR_ANY);


if( bind(sServSock,(LPSOCKADDR)&amp;addr,sizeof(addr)) == SOCKET_ERROR )
&#123;
    nSockErr = WSAGetLastError();
    //绑定出错处理
&#125;



//监听客户端请求连接
if( listen(sServSock, 2)    ==    SOCKET_ERROR)
&#123;
    nSockErr = WSAGetLastError();
    //出错处理
&#125;

while( nNumConns &lt; 5)&#123;
    //每当收到客户端连接请求，创建新的会话 SOCKET，保存在sConns 数组中
    //客户端地址保存在 ConnAddrs 数组中
    sConns[nNumConns] = accept(sServSock,ConnAddrs[nNumConns], &amp;nAddrLen); 
    if(sConns[nNumConns] == INVALID_SOCKET)
    &#123;
        nSockErr = WSAGetLastError();
        //创建会话 SOCKET 出错处理
    &#125;
    else
    &#123;
        //创建会话 SOCKET 成功，启动新的线程与客户端会话
        StartNewHandlerThread(sConns[nNumConns]);
        //当前请求连接数+1 
        nNumConns ++;
    &#125;
&#125;
</code></pre>
<h3 id="connect（）"><a href="#connect（）" class="headerlink" title="connect（）"></a>connect（）</h3><p>函数原型</p>
<pre><code>int connect (SOCKET s, const struct sockaddr FAR* name,
int    namelen );
</code></pre>
<p>参数</p>
<pre><code>s
[in] 一个未连接SOCKET，一般是由 socket 函数建立的。

name
[in] 指向描述通信对象地址信息的结构体 sockaddr 的指针。在该结构体中可以指定地址族（一般为 AF_INET）、主机的地址和端口。通常把主机地址指定为 INADDR_ANY（一个主机可能有多个网卡）。

namelen
[in] name 指针指向的结构体的长度。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回 0，失败则返回 SOCKET_ERROR。
这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>向对方主动提出连接请求。
</code></pre>
<h3 id="send（）"><a href="#send（）" class="headerlink" title="send（）"></a>send（）</h3><p>函数原型</p>
<pre><code>int send (SOCKET s, char * buf, int len ,int flags);
</code></pre>
<p>参数</p>
<pre><code>s
[in] 一个已经连接的SOCKET。

buf
[in] 指向要传输的数据的缓冲区的指针。

len
[in] buf 的长度。

flags
[in]指定函数调用的方式。一般不使用，指定为0。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回发送的字节数（可能小于 len），失败则返回 SOCKET_ERROR。
这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>通过已经连接的 SOCKET 发送数据。
</code></pre>
<h3 id="recv（）"><a href="#recv（）" class="headerlink" title="recv（）"></a>recv（）</h3><p>函数原型</p>
<pre><code>int recv (SOCKET s, char * buf, int len ,int flags);
</code></pre>
<p>参数</p>
<pre><code>s
[in]   一个已经连接的SOCKET。

buf
[out] 指向接收数据的缓冲区的指针。

len
[in] buf 的长度。

flags
[in]指定函数调用的方式。一般不使用，指定为0。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回接收到数据的字节数。如果失败则返回 SOCKET_ERROR。
这时可以调用 WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>通过已经连接的 SOCKET 接收数据。当读到的数据字节少于规定接受的数目（len）时，就把数据全部接收，并返回实际接收到的字节数；当读到的数据多于规定的值时，在流方式下剩余的数据由下个 recv 读出，在数据报方式下多余的数据被丢弃。
</code></pre>
<h3 id="sendto（）"><a href="#sendto（）" class="headerlink" title="sendto（）"></a>sendto（）</h3><p>函数原型</p>
<pre><code>int sendto (SOCKET s, char * buf, int len ,int flags,struct sockaddr_in * to, int tolen);
</code></pre>
<p>参数</p>
<pre><code>s
[in] 一个 SOCKET(可能已连接)。

buf
[in] 指向要传输的数据的缓冲区的指针。

len
[in] buf 的长度。

flags
[in] 指定函数调用的方式。一般取 0。

to
[in] 指向目标地址结构体的指针。

tolen
[in] 目标地址结构体的长度。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回发送的字节数（可能小于 len），失败则返回 SOCKET_ERROR。这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>该函数一般用于通过无连接的 SOCKET 发送数据报文，报文的接受者由 to 参数指定。
</code></pre>
<h3 id="recvfrom（）"><a href="#recvfrom（）" class="headerlink" title="recvfrom（）"></a>recvfrom（）</h3><p>函数原型</p>
<pre><code>int recvfrom (SOCKET s, char * buf, int len ,int flags,
struct sockaddr_in * from, int * fromlen);
</code></pre>
<p>参数</p>
<pre><code>s
[in] 一个已经绑定的SOCKET。

buf
[out] 指向接收数据的缓冲区的指针。

len
[in] buf 的长度。

flags
[in] 指定函数调用的方式。一般取 0。

from
[out] 指向源地址结构体的指针。

fromlen
[in/out] 源地址结构体的长度。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回发送的字节数（可能小于 len），失败则返回 SOCKET_ERROR。这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>该函数一般用于通过无连接的 SOCKET 接收数据报文，报文的发送者由 from 参数指定。
</code></pre>
<h3 id="closesocket（）"><a href="#closesocket（）" class="headerlink" title="closesocket（）"></a>closesocket（）</h3><p>函数原型</p>
<pre><code>int closesocket (SOCKET s);
</code></pre>
<p>参数</p>
<pre><code>s
[in] 要关闭的 SOCKET。
</code></pre>
<p>返回值</p>
<pre><code>函数执行成功返回 0，失败则返回 SOCKET_ERROR。
这时可以调用WSAGetLastError 函数取得具体的错误代码。
</code></pre>
<p>函数功能</p>
<pre><code>关闭指定的 SOCKET。
</code></pre>
<h2 id="Winsock-2-0"><a href="#Winsock-2-0" class="headerlink" title="Winsock 2.0"></a>Winsock 2.0</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Winsock 1.1 原先设计的时候把API 限定在 TCP&#x2F;IP 的范畴里，它不象 Berkerly 模型那样支持多种协议。而 Winsock<br>2.0 正规化了一些其它的协议（如 ATM、IPX&#x2F;SPX 和DECNet 协议）的API。<br>Winsock 2.0 之所以能支持多种协议，是因为 Winsock 2.0 在 Windows Sockets DLL 和底层协议栈之间定义了一个<br>SPI（Service Provider Interface）接口，这样，通过一个 Windows Sockets DLL 可以同时访问底层不同厂商的协议栈。<br>Winsock 2.0 不仅允许多种协议栈的并存，而且从理论上讲，它还允许创造一个与网络协议无关的应用程序。Winsock<br>2.0 可以基于服务的需要透明地选择协议，应用程序可以适用于不同的网络名和网络地址。<br>Winsock 2.0 还扩展了它的API 函数集，当然 Winsock 2.0 是向下兼容的，可以把 Winsock 1.1 的代码原封不动地用在 Winsock 2.0 中。</p>
<h3 id="Winsock-2-0-新特性"><a href="#Winsock-2-0-新特性" class="headerlink" title="Winsock 2.0 新特性"></a>Winsock 2.0 新特性</h3><p>下面列出了一些 Winsock 2.0 的重要新特性：</p>
<ul>
<li>多重协议支持：SPI 接口使得新的协议可以被支持。</li>
<li>传输协议独立：根据服务提供不同的协议。</li>
<li>多重命名空间：根据需要的服务和解析的主机名选择协议。</li>
<li>分散和聚集： 从多个缓冲区接受和发送数据。</li>
<li>重叠 I&#x2F;O 和事件对象：增强吞吐量。</li>
<li>服务质量（Qos）：协商和跟踪网络带宽。</li>
<li>条件接受：可以选择性地决定是否接受连接。</li>
<li>Socket 共享：多个进程可以共享一个 SOKCKET 句柄。</li>
</ul>
<h3 id="Winsock-2-0-新增函数"><a href="#Winsock-2-0-新增函数" class="headerlink" title="Winsock 2.0 新增函数"></a>Winsock 2.0 新增函数</h3><p>下面列出了一些 Winsock 2.0 的重要新增函数：</p>
<ul>
<li><p>WSAAccept（）：accept（）函数的扩展版本，支持条件接受和套接字分组。</p>
</li>
<li><p>WASCloseEvent（）：释放一个时间对象。</p>
</li>
<li><p>WSAConnect（）：connect（）函数的扩展版本，支持连接数据交换和Qos 规范。</p>
</li>
<li><p>WSACreatEvent（）：创建一个事件对象。</p>
</li>
<li><p>WSADuplicateSocket（）：为一个共享套接字创建一个新的套接字。</p>
</li>
<li><p>WSAEnumNetworkEvents（）：检查是否有网络事件发生。</p>
</li>
<li><p>WSAEnumProtocols（）：得到每个可用的协议的信息。</p>
</li>
<li><p>WSAEventSelect（）：把一个网络事件和一个事件对象连接。</p>
</li>
<li><p>WSAGetOverlappedResu（）：得到重叠操作的完成状态。</p>
</li>
<li><p>WSAHtonl（）：htonl（）函数的扩展版本。</p>
</li>
<li><p>WSAHtons（）：htons（）函数的扩展版本。</p>
</li>
<li><p>WSAIoctl（）：ioctlsocket（）函数允许重叠操作的扩展版本。</p>
</li>
<li><p>WSANtohl（）：ntohl（）函数的扩展版本。</p>
</li>
<li><p>WSANtohs（）：ntohs（）函数的扩展版本。</p>
</li>
<li><p>WSARecv（）：recv（）的扩展版本，支持分散&#x2F;聚集&#x2F;重叠 I&#x2F;O。</p>
</li>
<li><p>WSARecvDisconnect（）：终止套接字的接受操作。</p>
</li>
<li><p>WSARecvFrom（）：recvfrom（）的扩展版本，支持分散&#x2F;聚集&#x2F;重叠 I&#x2F;O。</p>
</li>
<li><p>WSAResetEvent（）：重新初始化事件对象。</p>
</li>
<li><p>WSASend（）：send（）的扩展版本，支持分散&#x2F;聚集&#x2F;重叠 I&#x2F;O。</p>
</li>
<li><p>WSARecvDisconnect（）：终止套接字的接受操作。</p>
</li>
<li><p>WSASendDisconnect（）：终止套接字的发送操作。</p>
</li>
<li><p>WSASendTo（）：sendto（）的扩展版本，支持分散&#x2F;聚集&#x2F;重叠 I&#x2F;O。</p>
</li>
<li><p>WSASetEvent（）：设置事件对象。</p>
</li>
<li><p>WSASocket（）：socket（）函数的扩展版本。它以一个 PROTOCOL_INFO 结构作为输入参数，并且允许创建重叠套接字，还允许创建套接字组。</p>
</li>
<li><p>WSAWaitForMultipleEvents（）：阻塞多个事件对象。</p>
</li>
</ul>
<p>关于这些函数的具体细节，请查阅 MSDN。</p>
<h2 id="文件描述符"><a href="#文件描述符" class="headerlink" title="文件描述符"></a>文件描述符</h2><p>在 tcp 的服务器端，有两类文件描述符</p>
<ul>
<li>监听的文件描述符<ul>
<li>只需要有一个</li>
<li>不负责和客户端通信，负责检测客户端的连接请求，检测到之后调用 accept 就可以建立新的连接</li>
</ul>
</li>
<li>通信的文件描述符<ul>
<li>负责和建立连接的客户端通信</li>
<li>如果有 N 个客户端和服务器建立了新的连接，通信的文件描述符就有 N 个，每个客户端和服务器都对应一个通信的文件描述符</li>
</ul>
</li>
</ul>
<p>一个文件文件描述符对应两块内存, 一块内存是读缓冲区, 一块内存是写缓冲区</p>
<ul>
<li>读数据: 通过文件描述符将内存中的数据读出, 这块内存称之为读缓冲区</li>
<li>写数据: 通过文件描述符将数据写入到某块内存中, 这块内存称之为写缓冲区</li>
</ul>
<p>监听的文件描述符:</p>
<ul>
<li>客户端的连接请求会发送到服务器端监听的文件描述符的读缓冲区中</li>
<li>读缓冲区中有数据，说明有新的客户端连接</li>
<li>调用 accept () 函数，这个函数会检测监听文件描述符的读缓冲区</li>
<li>检测不到数据，该函数阻塞</li>
<li>如果检测到数据，解除阻塞，新的连接建立</li>
</ul>
<p>通信的文件描述符:</p>
<ul>
<li>客户端和服务器端都有通信的文件描述符</li>
<li>发送数据：调用函数 write () &#x2F;send ()，数据进入到内核中<ul>
<li>数据并没有被发送出去，而是将数据写入到了通信的文件描述符对应的写缓冲区中</li>
<li>内核检测到通信的文件描述符写缓冲区中有数据，内核会将数据发送到网络中</li>
</ul>
</li>
<li>接收数据：调用的函数 read () &#x2F;recv (), 从内核读数据<ul>
<li>数据如何进入到内核程序猿不需要处理，数据进入到通信的文件描述符的读缓冲区中</li>
<li>数据进入到内核，必须使用通信的文件描述符，将数据从读缓冲区中读出即可</li>
</ul>
</li>
</ul>
<p>服务器端代码示例：</p>
<pre><code>// server.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;arpa/inet.h&gt;
int main()
&#123;
    // 1. 创建监听的套接字
    //基于TCP 所以选择流式协议
    int lfd = socket(AF_INET, SOCK_STREAM, 0);
    if(lfd == -1)
    &#123;
        perror(&quot;socket&quot;);
        exit(0);
    &#125;

    // 2. 将socket()返回值和本地的IP端口绑定到一起
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(10000);   // 大端端口
    // INADDR_ANY代表本机的所有IP, 假设有三个网卡就有三个IP地址
    // 这个宏可以代表任意一个IP地址
    // 这个宏一般用于本地的绑定操作
    addr.sin_addr.s_addr = INADDR_ANY;  // 这个宏的值为0 == 0.0.0.0
    //inet_pton(AF_INET, &quot;192.168.237.131&quot;, &amp;addr.sin_addr.s_addr);
    int ret = bind(lfd, (struct sockaddr*)&amp;addr, sizeof(addr));
    if(ret == -1)
    &#123;
        perror(&quot;bind&quot;);
        exit(0);
    &#125;

    // 3. 设置监听
    ret = listen(lfd, 128);
    if(ret == -1)
    &#123;
        perror(&quot;listen&quot;);
        exit(0);
    &#125;
    // 4. 阻塞等待并接受客户端连接
    struct sockaddr_in cliaddr;
    int clilen = sizeof(cliaddr);
    int cfd = accept(lfd, (struct sockaddr*)&amp;cliaddr, &amp;clilen);
    if(cfd == -1)
    &#123;
        perror(&quot;accept&quot;);
        exit(0);
    &#125;
    // 打印客户端的地址信息
    char ip[24] = &#123;0&#125;;
    printf(&quot;客户端的IP地址: %s, 端口: %d\n&quot;,
        inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, ip, sizeof(ip)),ntohs(cliaddr.sin_port));

    // 5. 和客户端通信
    while(1)
    &#123;
        // 接收数据
        char buf[1024];
        memset(buf, 0, sizeof(buf));
        int len = read(cfd, buf, sizeof(buf));
        if(len &gt; 0)
        &#123;
            printf(&quot;客户端say: %s\n&quot;, buf);
            write(cfd, buf, len);
        &#125;
        else if(len  == 0)
        &#123;
            printf(&quot;客户端断开了连接...\n&quot;);
            break;
        &#125;
        else
        &#123;
            perror(&quot;read&quot;);
            break;
        &#125;
    &#125;

    close(cfd);
    close(lfd);

    return 0;
&#125;
</code></pre>
<p>客户端代码示例：</p>
<pre><code>// client.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;arpa/inet.h&gt;

int main()
&#123;
    // 1. 创建通信的套接字
    int fd = socket(AF_INET, SOCK_STREAM, 0);
    if(fd == -1)
    &#123;
        perror(&quot;socket&quot;);
        exit(0);
    &#125;

    // 2. 连接服务器
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(10000);   // 大端端口
    inet_pton(AF_INET, &quot;192.168.237.131&quot;, &amp;addr.sin_addr.s_addr);

    int ret = connect(fd, (struct sockaddr*)&amp;addr, sizeof(addr));
    if(ret == -1)
    &#123;
        perror(&quot;connect&quot;);
        exit(0);
    &#125;

    // 3. 和服务器端通信
    int number = 0;
    while(1)
    &#123;
        // 发送数据
        char buf[1024];
        sprintf(buf, &quot;你好, 服务器...%d\n&quot;, number++);
        write(fd, buf, strlen(buf)+1);
        
        // 接收数据
        memset(buf, 0, sizeof(buf));
        int len = read(fd, buf, sizeof(buf));
        if(len &gt; 0)
        &#123;
            printf(&quot;服务器say: %s\n&quot;, buf);
        &#125;
        else if(len  == 0)
        &#123;
            printf(&quot;服务器断开了连接...\n&quot;);
            break;
        &#125;
        else
        &#123;
            perror(&quot;read&quot;);
            break;
        &#125;
        sleep(1);   // 每隔1s发送一条数据
    &#125;

    close(fd);

    return 0;
&#125;
</code></pre>
<h2 id="多进程并发"><a href="#多进程并发" class="headerlink" title="多进程并发"></a>多进程并发</h2><p>在上面的代码中用到了三个会引起程序阻塞的函数，分别是：</p>
<ul>
<li>accept()：如果服务器端没有新客户端连接，阻塞当前进程 &#x2F; 线程，如果检测到新连接解除阻塞，建立连接</li>
<li>read()：如果通信的套接字对应的读缓冲区没有数据，阻塞当前进程 &#x2F; 线程，检测到数据解除阻塞，接收数据</li>
<li>write()：如果通信的套接字写缓冲区被写满了，阻塞当前进程 &#x2F; 线程（这种情况比较少见）<br>如果需要和发起新的连接请求的客户端建立连接，那么就必须在服务器端通过一个循环调用 accept() 函数，另外已经和服务器建立连接的客户端需要和服务器通信，发送数据时的阻塞可以忽略，当接收不到数据时程序也会被阻塞，这时候就会非常矛盾，被 accept() 阻塞就无法通信，被 read() 阻塞就无法和客户端建立新连接。</li>
</ul>
<p>因此得出一个结论，基于上述处理方式，在单线程 &#x2F; 单进程场景下，服务器是无法处理多连接的，解决方案也有很多：</p>
<ul>
<li>使用多线程实现</li>
<li>使用多进程实现</li>
<li>使用 IO 多路转接（复用）实现</li>
<li>使用 IO 多路转接 + 多线程实现</li>
</ul>
<p>多进程并发<br>如果要编写多进程版的并发服务器程序，首先要考虑，创建出的多个进程都是什么角色，这样就可以在程序中对号入座了。在 Tcp 服务器端一共有两个角色，分别是：监听和通信，监听是一个持续的动作，如果有新连接就建立连接，如果没有新连接就阻塞。关于通信是需要和多个客户端同时进行的，因此需要多个进程，这样才能达到互不影响的效果。进程也有两大类：父进程和子进程，通过分析我们可以这样分配进程：</p>
<p>父进程：</p>
<ul>
<li>负责监听，处理客户端的连接请求，也就是在父进程中循环调用 accept() 函数</li>
<li>创建子进程：建立一个新的连接，就创建一个新的子进程，让这个子进程和对应的客户端通信</li>
<li>回收子进程资源：子进程退出回收其内核 PCB 资源，防止出现僵尸进程</li>
<li>子进程：负责通信，基于父进程建立新连接之后得到的文件描述符，和对应的客户端完成数据的接收和发送。</li>
<li>发送数据：send() &#x2F; write()</li>
<li>接收数据：recv() &#x2F; read()</li>
</ul>
<p>在多进程版的服务器端程序中，多个进程是有血缘关系，对应有血缘关系的进程来说，还需要想明白他们有哪些资源是可以被继承的，哪些资源是独占的，以及一些其他细节：</p>
<ul>
<li>子进程是父进程的拷贝，在子进程的内核区 PCB 中，文件描述符也是可以被拷贝的，因此在父进程可以使用的文件描述符在子进程中也有一份，并且可以使用它们做和父进程一样的事情。</li>
<li>父子进程有用各自的独立的虚拟地址空间，因此所有的资源都是独占的</li>
<li>为了节省系统资源，对于只有在父进程才能用到的资源，可以在子进程中将其释放掉，父进程亦如此。</li>
<li>由于需要在父进程中做 accept() 操作，并且要释放子进程资源，如果想要更高效一下可以使用信号的方式处理</li>
</ul>
<p>服务器端代码示例：</p>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;signal.h&gt;
#include &lt;sys/wait.h&gt;
#include &lt;errno.h&gt;

// 信号处理函数
void callback(int num)
&#123;
    while(1)
    &#123;
        pid_t pid = waitpid(-1, NULL, WNOHANG);
        if(pid &lt;= 0)
        &#123;
            printf(&quot;子进程正在运行, 或者子进程被回收完毕了\n&quot;);
            break;
        &#125;
        printf(&quot;child die, pid = %d\n&quot;, pid);
    &#125;
&#125;

int childWork(int cfd);
int main()
&#123;
    // 1. 创建监听的套接字
    int lfd = socket(AF_INET, SOCK_STREAM, 0);
    if(lfd == -1)
    &#123;
        perror(&quot;socket&quot;);
        exit(0);
    &#125;

    // 2. 将socket()返回值和本地的IP端口绑定到一起
    struct sockaddr_in addr;
    addr.sin_family = AF_INET;
    addr.sin_port = htons(10000);   // 大端端口
    // INADDR_ANY代表本机的所有IP, 假设有三个网卡就有三个IP地址
    // 这个宏可以代表任意一个IP地址
    // 这个宏一般用于本地的绑定操作
    addr.sin_addr.s_addr = INADDR_ANY;  // 这个宏的值为0 == 0.0.0.0
    //    inet_pton(AF_INET, &quot;192.168.237.131&quot;, &amp;addr.sin_addr.s_addr);
    int ret = bind(lfd, (struct sockaddr*)&amp;addr, sizeof(addr));
    if(ret == -1)
    &#123;
        perror(&quot;bind&quot;);
        exit(0);
    &#125;

    // 3. 设置监听
    ret = listen(lfd, 128);
    if(ret == -1)
    &#123;
        perror(&quot;listen&quot;);
        exit(0);
    &#125;

    // 注册信号的捕捉
    struct sigaction act;
    act.sa_flags = 0;
    act.sa_handler = callback;
    sigemptyset(&amp;act.sa_mask);
    sigaction(SIGCHLD, &amp;act, NULL);

    // 接受多个客户端连接, 对需要循环调用 accept
    while(1)
    &#123;
        // 4. 阻塞等待并接受客户端连接
        struct sockaddr_in cliaddr;
        int clilen = sizeof(cliaddr);
        int cfd = accept(lfd, (struct sockaddr*)&amp;cliaddr, &amp;clilen);
        if(cfd == -1)
        &#123;
            if(errno == EINTR)
            &#123;
                // accept调用被信号中断了, 解除阻塞, 返回了-1
                // 重新调用一次accept
                continue;
            &#125;
            perror(&quot;accept&quot;);
            exit(0);

        &#125;
        // 打印客户端的地址信息
        char ip[24] = &#123;0&#125;;
        printf(&quot;客户端的IP地址: %s, 端口: %d\n&quot;,
            inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, ip, sizeof(ip)),
            ntohs(cliaddr.sin_port));
        // 新的连接已经建立了, 创建子进程, 让子进程和这个客户端通信
        pid_t pid = fork();
        if(pid == 0)
        &#123;
            // 子进程 -&gt; 和客户端通信
            // 通信的文件描述符cfd被拷贝到子进程中
            // 子进程不负责监听
            close(lfd);
            while(1)
            &#123;
                int ret = childWork(cfd);
                if(ret &lt;=0)
                &#123;
                    break;
                &#125;
            &#125;
            // 退出子进程
            close(cfd);
            exit(0);
        &#125;
        else if(pid &gt; 0)
        &#123;
            // 父进程不和客户端通信
            close(cfd);
        &#125;
    &#125;
    return 0;
&#125;


// 5. 和客户端通信
int childWork(int cfd)
&#123;

    // 接收数据
    char buf[1024];
    memset(buf, 0, sizeof(buf));
    int len = read(cfd, buf, sizeof(buf));
    if(len &gt; 0)
    &#123;
        printf(&quot;客户端say: %s\n&quot;, buf);
        write(cfd, buf, len);
    &#125;
    else if(len  == 0)
    &#123;
        printf(&quot;客户端断开了连接...\n&quot;);
    &#125;
    else
    &#123;
        perror(&quot;read&quot;);
    &#125;

    return len;
&#125;
</code></pre>
<h2 id="多线程并发"><a href="#多线程并发" class="headerlink" title="多线程并发"></a>多线程并发</h2><p>多线程中的线程有两大类：主线程（父线程）和子线程，他们分别要在服务器端处理监听和通信流程。根据多进程的处理思路，就可以这样设计了：</p>
<p><strong>主线程：</strong></p>
<ul>
<li>负责监听，处理客户端的连接请求，也就是在父进程中循环调用 accept() 函数</li>
<li>创建子线程：建立一个新的连接，就创建一个新的子进程，让这个子进程和对应的客户端通信</li>
<li>回收子线程资源：由于回收需要调用阻塞函数，这样就会影响 accept()，直接做线程分离即可。</li>
</ul>
<p><strong>子线程：</strong></p>
<ul>
<li><p>负责通信，基于主线程建立新连接之后得到的文件描述符，和对应的客户端完成数据的接收和发送。</p>
</li>
<li><p>发送数据：send() &#x2F; write()</p>
</li>
<li><p>接收数据：recv() &#x2F; read()<br>在多线程版的服务器端程序中，多个线程共用同一个地址空间，有些数据是共享的，有些数据的独占的，下面来分析一些其中的一些细节：</p>
</li>
<li><p>同一地址空间中的多个线程的栈空间是独占的</p>
</li>
<li><p>多个线程共享全局数据区，堆区，以及内核区的文件描述符等资源，因此需要注意数据覆盖问题，并且在多个线程访问共享资源的时候，还需要进行线程同步。</p>
</li>
</ul>
<p>代码如下：</p>
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
#include &lt;string.h&gt;
#include &lt;arpa/inet.h&gt;
#include &lt;pthread.h&gt;

struct SockInfo
&#123;
    int fd;                      // 通信
    pthread_t tid;               // 线程ID
    struct sockaddr_in addr;     // 地址信息
&#125;;

struct SockInfo infos[128];

void* working(void* arg)
&#123;
    while(1)
    &#123;
        struct SockInfo* info = (struct SockInfo*)arg;
        // 接收数据
        char buf[1024];
        int ret = read(info-&gt;fd, buf, sizeof(buf));
        if(ret == 0)
        &#123;
            printf(&quot;客户端已经关闭连接...\n&quot;);
            info-&gt;fd = -1;
            break;
        &#125;
        else if(ret == -1)
        &#123;
            printf(&quot;接收数据失败...\n&quot;);
            info-&gt;fd = -1;
            break;
        &#125;
        else
        &#123;
            write(info-&gt;fd, buf, strlen(buf)+1);
        &#125;
    &#125;
    return NULL;
&#125;
</code></pre>
<p>在编写多线程版并发服务器代码的时候，需要注意父子线程共用同一个地址空间中的文件描述符，因此每当在主线程中建立一个新的连接，都需要将得到文件描述符值保存起来，不能在同一变量上进行覆盖，这样做丢失了之前的文件描述符值也就不知道怎么和客户端通信了。</p>
<p>在上面示例代码中是将成功建立连接之后得到的用于通信的文件描述符值保存到了一个全局数组中，每个子线程需要和不同的客户端通信，需要的文件描述符值也就不一样，只要保证存储每个有效文件描述符值的变量对应不同的内存地址，在使用的时候就不会发生数据覆盖的现象，造成通信数据的混乱了。</p>
<p><strong>注：</strong><br>本文参照了苏丙榅的博客 链接: <a target="_blank" rel="noopener" href="https://subingwen.cn/linux/concurrence/#2-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91">https://subingwen.cn/linux/concurrence/#2-%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E5%8F%91</a><br>以及华中科技大学计算机网络与通信实验指导书</p>

      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎对文章中的引用来源进行考证，欢迎指出任何有错误或不够清晰的表达。可以在下面评论区评论，也可以邮件至 3366576307@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">💰</a>
</p>




    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '9863a58d805d69a19ec3',
            clientSecret: 'eec6c8ede04bbc286f4410646f54282eafb3b33f',
            repo: 'talkFile.github.io',
            owner: 'whl963854',
            admin: ['whl963854'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('10',10)
        })
        gitalk.render('comments')
    })
</script>




    
        <!-- MathJax配置，可通过单美元符号书写行内公式等 -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
    });
</script>
<!-- 给MathJax元素添加has-jax class -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<!-- 通过连接CDN加载MathJax的js代码 -->
<script type="text/javascript" async
        src="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<input type="hidden" id="MathJax-js"
        value="//cdn.jsdelivr.net/npm/mathjax@2.7.8/unpacked/MathJax.js?config=TeX-MML-AM_CHTML">
</input>
    




    </div>
    <div class="copyright">
        <p class="footer-entry">
    ©2022 whl
</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/yelog/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">×</a>
    <div class="shang_tit">
        <p>Help us with donation</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.jpg" class="alipay" title="扫码支持">
            <img src="/img/weixin.jpg" class="weixin" title="扫码支持">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #c1bfc1;
    }
    
    
    .nav-right nav a.hover > span{
        color: #ffffff !important;
    }
    

    /*列表样式*/
    
    #post .pjax article .article-entry>ol, #post .pjax article .article-entry>ul, #post .pjax article>ol, #post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    #post .pjax article .article-entry li>ol, #post .pjax article .article-entry li>ul,#post .pjax article li>ol, #post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    #post .pjax article .article-entry>ol>li, #post .pjax article .article-entry>ul>li,#post .pjax article>ol>li, #post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    #post .pjax article .article-entry li>ol>li, #post .pjax article .article-entry li>ul>li,#post .pjax article li>ol>li, #post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>






<div class="mobile-menus-out" >

</div>
<div class="mobile-menus">
    
    
    
    
    <a class="dynamic-menu " target="_blank"  href="https://github.com/whl963854">github</a>
    
</div>

<div id="musicMouseDrag" style="position:fixed; z-index: 9999; bottom: 0; right: 0;">
<div id="musicDragArea" style="position: absolute; top: 0; left: 0; width: 100%;height: 10px;cursor: move; z-index: 10;"></div>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=483671599&auto=1&height=66"></iframe>
</div>




<!--以下代码是为了支持随时拖动音乐控件的位置，如没有需求，可去掉下面代码-->
<script>
var $DOC = $(document)
$('#musicMouseDrag').on('mousedown', function (e) {
// 阻止文本选中
$DOC.bind("selectstart", function () {
return false;
});
$('#musicDragArea').css('height', '100%');
var $moveTarget = $('#musicMouseDrag');
$moveTarget.css('border', '1px dashed grey')
var div_x = e.pageX - $moveTarget.offset().left;
var div_y = e.pageY - $moveTarget.offset().top;
$DOC.on('mousemove', function (e) {
var targetX = e.pageX - div_x;
var targetY = e.pageY - div_y;
targetX = targetX < 0 ? 0 : (targetX + $moveTarget.outerWidth() >= window.innerWidth) ? window.innerWidth - $moveTarget.outerWidth() : targetX;
targetY = targetY < 0 ? 0 : (targetY + $moveTarget.outerHeight() >= window.innerHeight) ? window.innerHeight - $moveTarget.outerHeight() : targetY;
$moveTarget.css({'left': targetX + 'px', 'top': targetY + 'px', 'bottom': 'inherit', 'right': 'inherit'})
}).on('mouseup', function () {
$DOC.unbind("selectstart");
$DOC.off('mousemove')
$DOC.off('mouseup')
$moveTarget.css('border', 'none')
$('#musicDragArea').css('height', '10px');
})
})
</script>
</html>
